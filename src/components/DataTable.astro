---
/**
 * DataTable - Reusable data table component for admin pages
 * Supports selectable rows with "select all" functionality
 */
export interface Column {
  key: string;
  label: string;
  class?: string;
}

export interface Props {
  id?: string;
  columns: Column[];
  selectable?: boolean;
  selectAllId?: string;
  emptyMessage?: string;
  class?: string;
}

const {
  id,
  columns,
  selectable = false,
  selectAllId = 'select-all',
  emptyMessage = 'Aucune donn√©e',
  class: className = '',
} = Astro.props;

const tableClass = ['data-table', className].filter(Boolean).join(' ');
---

<table id={id} class={tableClass}>
  <thead>
    <tr>
      {selectable && (
        <th class="checkbox-col">
          <label class="select-all-label">
            <input type="checkbox" id={selectAllId} class="select-all-checkbox" />
          </label>
        </th>
      )}
      {columns.map((col) => (
        <th class={col.class}>{col.label}</th>
      ))}
    </tr>
  </thead>
  <tbody>
    <slot />
  </tbody>
</table>

<style>
  .data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: var(--text-sm);
  }

  .data-table th,
  .data-table td {
    padding: var(--space-3);
    text-align: left;
    border-bottom: 1px solid var(--border-subtle);
  }

  .data-table th {
    font-weight: 600;
    color: var(--color-text-secondary);
    background: var(--color-surface);
    position: sticky;
    top: 0;
  }

  .data-table tbody tr:hover {
    background: rgba(0, 27, 165, 0.03);
  }

  .checkbox-col {
    width: 40px;
    text-align: center;
  }

  .select-all-label {
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  .actions-col {
    width: 120px;
    text-align: right;
  }
</style>
